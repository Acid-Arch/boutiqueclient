import{s as f,b as d}from"./9ZzghxzE.js";const g=()=>{const e=f;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},m={subscribe(e){return g().page.subscribe(e)}};async function R(e,t,s){const{callbackUrl:c,...i}=t??{},{redirect:n=!0,redirectTo:r=c??window.location.href,...w}=i,b=`${d??""}/auth/signin/${e}`,o=await fetch(`${b}?${new URLSearchParams(s)}`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...w,callbackUrl:r})}),a=await o.json();if(n){const l=a.url??r;window.location.href=l,l.includes("#")&&window.location.reload();return}const u=new URL(a.url).searchParams.get("error")??void 0,h=new URL(a.url).searchParams.get("code")??void 0;return{error:u,code:h,status:o.status,ok:o.ok,url:u?null:a.url}}async function $(e){const{redirect:t=!0,redirectTo:s=e?.callbackUrl??window.location.href}=e??{},n=await(await fetch(`${d??""}/auth/signout`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({callbackUrl:s})})).json();if(t){const r=n.url??s;window.location.href=r,r.includes("#")&&window.location.reload();return}return n}export{$ as a,m as p,R as s};
