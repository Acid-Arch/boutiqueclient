{"version":3,"file":"_server.ts-CHTazxBf.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/auth/oauth/initiate/_server.ts.js"],"sourcesContent":["import { redirect } from \"@sveltejs/kit\";\nimport { d as dev } from \"../../../../../../chunks/index.js\";\nconst GET = async ({ url, cookies }) => {\n  try {\n    const returnUrl = url.searchParams.get(\"returnUrl\") || \"/client-portal\";\n    cookies.set(\"oauth_return_url\", returnUrl, {\n      path: \"/\",\n      httpOnly: true,\n      secure: !dev,\n      sameSite: \"lax\",\n      maxAge: 300\n      // 5 minutes\n    });\n    const baseUrl = url.origin;\n    const oauthUrl = `${baseUrl}/auth/signin/google`;\n    const callbackUrl = `${baseUrl}/auth/callback/google`;\n    const fullOAuthUrl = `${oauthUrl}?callbackUrl=${encodeURIComponent(callbackUrl)}`;\n    throw redirect(302, fullOAuthUrl);\n  } catch (err) {\n    console.error(\"OAuth initiation error:\", err);\n    if (err instanceof Error && \"status\" in err) {\n      throw err;\n    }\n    throw redirect(302, \"/login?error=oauth_initiation_failed\");\n  }\n};\nconst POST = async (event) => {\n  return GET(event);\n};\nexport {\n  GET,\n  POST\n};\n"],"names":[],"mappings":";;;;AAEK,MAAC,GAAG,GAAG,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK;AACxC,EAAE,IAAI;AACN,IAAI,MAAM,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,gBAAgB;AAC3E,IAAI,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,SAAS,EAAE;AAC/C,MAAM,IAAI,EAAE,GAAG;AACf,MAAM,QAAQ,EAAE,IAAI;AACpB,MAAM,MAAM,EAAE,CAAC,GAAG;AAClB,MAAM,QAAQ,EAAE,KAAK;AACrB,MAAM,MAAM,EAAE;AACd;AACA,KAAK,CAAC;AACN,IAAI,MAAM,OAAO,GAAG,GAAG,CAAC,MAAM;AAC9B,IAAI,MAAM,QAAQ,GAAG,CAAC,EAAE,OAAO,CAAC,mBAAmB,CAAC;AACpD,IAAI,MAAM,WAAW,GAAG,CAAC,EAAE,OAAO,CAAC,qBAAqB,CAAC;AACzD,IAAI,MAAM,YAAY,GAAG,CAAC,EAAE,QAAQ,CAAC,aAAa,EAAE,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;AACrF,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,YAAY,CAAC;AACrC,EAAE,CAAC,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,GAAG,CAAC;AACjD,IAAI,IAAI,GAAG,YAAY,KAAK,IAAI,QAAQ,IAAI,GAAG,EAAE;AACjD,MAAM,MAAM,GAAG;AACf,IAAI;AACJ,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,sCAAsC,CAAC;AAC/D,EAAE;AACF;AACK,MAAC,IAAI,GAAG,OAAO,KAAK,KAAK;AAC9B,EAAE,OAAO,GAAG,CAAC,KAAK,CAAC;AACnB;;;;"}