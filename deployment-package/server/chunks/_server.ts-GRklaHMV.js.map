{"version":3,"file":"_server.ts-GRklaHMV.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/alerts/_server.ts.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { l as logger, L as LogLevel } from \"../../../../chunks/logger.js\";\nimport { m as metrics } from \"../../../../chunks/metrics.js\";\nimport { b as rateLimitAdmin } from \"../../../../chunks/rate-limiter-comprehensive.js\";\nvar AlertSeverity = /* @__PURE__ */ ((AlertSeverity2) => {\n  AlertSeverity2[\"LOW\"] = \"low\";\n  AlertSeverity2[\"MEDIUM\"] = \"medium\";\n  AlertSeverity2[\"HIGH\"] = \"high\";\n  AlertSeverity2[\"CRITICAL\"] = \"critical\";\n  return AlertSeverity2;\n})(AlertSeverity || {});\nvar AlertType = /* @__PURE__ */ ((AlertType2) => {\n  AlertType2[\"SYSTEM\"] = \"system\";\n  AlertType2[\"PERFORMANCE\"] = \"performance\";\n  AlertType2[\"SECURITY\"] = \"security\";\n  AlertType2[\"BUSINESS\"] = \"business\";\n  AlertType2[\"DATABASE\"] = \"database\";\n  AlertType2[\"EXTERNAL\"] = \"external\";\n  return AlertType2;\n})(AlertType || {});\nclass AlertManager {\n  static instance;\n  activeAlerts = /* @__PURE__ */ new Map();\n  alertRules = /* @__PURE__ */ new Map();\n  alertHistory = [];\n  lastEvaluationTimes = /* @__PURE__ */ new Map();\n  static getInstance() {\n    if (!AlertManager.instance) {\n      AlertManager.instance = new AlertManager();\n      AlertManager.instance.setupDefaultRules();\n    }\n    return AlertManager.instance;\n  }\n  setupDefaultRules() {\n    this.addRule({\n      id: \"high_response_time\",\n      name: \"High Response Time\",\n      type: \"performance\",\n      severity: \"medium\",\n      condition: {\n        metric: \"http_request_duration_ms\",\n        operator: \"gt\",\n        threshold: 2e3,\n        // 2 seconds\n        duration: 5,\n        // 5 minutes\n        evaluationWindow: 10\n        // 10 minutes\n      },\n      enabled: true,\n      cooldown: 15,\n      actions: [\n        { type: \"log\", config: {} }\n        // { type: 'email', config: { to: 'ops@company.com' } }\n      ]\n    });\n    this.addRule({\n      id: \"high_error_rate\",\n      name: \"High Error Rate\",\n      type: \"system\",\n      severity: \"high\",\n      condition: {\n        metric: \"errors_total\",\n        operator: \"gt\",\n        threshold: 10,\n        // 10 errors\n        duration: 5,\n        // 5 minutes\n        evaluationWindow: 10\n        // 10 minutes\n      },\n      enabled: true,\n      cooldown: 10,\n      actions: [\n        { type: \"log\", config: {} }\n      ]\n    });\n    this.addRule({\n      id: \"high_memory_usage\",\n      name: \"High Memory Usage\",\n      type: \"system\",\n      severity: \"medium\",\n      condition: {\n        metric: \"memory_heap_used_bytes\",\n        operator: \"gt\",\n        threshold: 1024 * 1024 * 1024,\n        // 1GB\n        duration: 10,\n        // 10 minutes\n        evaluationWindow: 15\n        // 15 minutes\n      },\n      enabled: true,\n      cooldown: 30,\n      actions: [\n        { type: \"log\", config: {} }\n      ]\n    });\n    this.addRule({\n      id: \"database_connection_issues\",\n      name: \"Database Connection Issues\",\n      type: \"database\",\n      severity: \"critical\",\n      condition: {\n        metric: \"db_connection_errors\",\n        operator: \"gt\",\n        threshold: 3,\n        // 3 connection errors\n        duration: 2,\n        // 2 minutes\n        evaluationWindow: 5\n        // 5 minutes\n      },\n      enabled: true,\n      cooldown: 5,\n      actions: [\n        { type: \"log\", config: {} }\n      ]\n    });\n  }\n  addRule(rule) {\n    this.alertRules.set(rule.id, rule);\n    logger.logSystem(LogLevel.INFO, `Alert rule added: ${rule.name}`, {\n      component: \"alert-manager\",\n      event: \"rule_added\",\n      details: {\n        ruleId: rule.id,\n        type: rule.type,\n        severity: rule.severity\n      }\n    });\n  }\n  removeRule(ruleId) {\n    if (this.alertRules.delete(ruleId)) {\n      logger.logSystem(LogLevel.INFO, `Alert rule removed: ${ruleId}`, {\n        component: \"alert-manager\",\n        event: \"rule_removed\",\n        details: { ruleId }\n      });\n    }\n  }\n  // Evaluate all rules and trigger alerts if necessary\n  evaluateRules() {\n    const now = Date.now();\n    for (const [ruleId, rule] of this.alertRules.entries()) {\n      if (!rule.enabled) continue;\n      const lastEvaluation = this.lastEvaluationTimes.get(ruleId) || 0;\n      if (now - lastEvaluation < rule.cooldown * 60 * 1e3) {\n        continue;\n      }\n      try {\n        if (this.evaluateRule(rule)) {\n          this.triggerAlert(rule);\n          this.lastEvaluationTimes.set(ruleId, now);\n        }\n      } catch (error) {\n        logger.logSystem(LogLevel.ERROR, `Failed to evaluate alert rule: ${rule.name}`, {\n          component: \"alert-manager\",\n          event: \"rule_evaluation_failed\",\n          error: error instanceof Error ? error : void 0,\n          details: { ruleId, ruleName: rule.name }\n        });\n      }\n    }\n  }\n  evaluateRule(rule) {\n    const metricsData = metrics.getMetrics(Date.now() - rule.condition.evaluationWindow * 60 * 1e3);\n    const metricData = metricsData.metrics[rule.condition.metric];\n    if (!metricData) return false;\n    let value;\n    switch (metricData.type) {\n      case \"counter\":\n        value = metricData.total || 0;\n        break;\n      case \"gauge\":\n        value = metricData.current || 0;\n        break;\n      case \"timer\":\n      case \"histogram\":\n        value = metricData.avg || 0;\n        break;\n      default:\n        return false;\n    }\n    return this.compareValues(value, rule.condition.operator, rule.condition.threshold);\n  }\n  compareValues(value, operator, threshold) {\n    switch (operator) {\n      case \"gt\":\n        return value > threshold;\n      case \"gte\":\n        return value >= threshold;\n      case \"lt\":\n        return value < threshold;\n      case \"lte\":\n        return value <= threshold;\n      case \"eq\":\n        return value === threshold;\n      case \"neq\":\n        return value !== threshold;\n      default:\n        return false;\n    }\n  }\n  triggerAlert(rule) {\n    const alertId = `${rule.id}_${Date.now()}`;\n    const alert = {\n      id: alertId,\n      type: rule.type,\n      severity: rule.severity,\n      title: rule.name,\n      message: `Alert triggered: ${rule.name}`,\n      timestamp: Date.now(),\n      resolved: false,\n      metadata: {\n        ruleId: rule.id,\n        condition: rule.condition\n      },\n      notificationsSent: []\n    };\n    this.activeAlerts.set(alertId, alert);\n    this.alertHistory.push(alert);\n    if (this.alertHistory.length > 1e3) {\n      this.alertHistory.splice(0, this.alertHistory.length - 1e3);\n    }\n    for (const action of rule.actions) {\n      this.executeAction(alert, action);\n    }\n    logger.logSystem(LogLevel.WARN, `Alert triggered: ${rule.name}`, {\n      component: \"alert-manager\",\n      event: \"alert_triggered\",\n      details: {\n        alertId,\n        type: alert.type,\n        severity: alert.severity,\n        rule: rule.name\n      }\n    });\n  }\n  executeAction(alert, action) {\n    try {\n      switch (action.type) {\n        case \"log\":\n          logger.logSystem(LogLevel.ERROR, `ALERT: ${alert.title}`, {\n            component: \"alert-manager\",\n            event: \"alert_notification\",\n            details: {\n              alertId: alert.id,\n              type: alert.type,\n              severity: alert.severity,\n              message: alert.message,\n              metadata: alert.metadata\n            }\n          });\n          break;\n        case \"email\":\n          console.log(`EMAIL ALERT: ${alert.title} - ${alert.message}`);\n          break;\n        case \"webhook\":\n          console.log(`WEBHOOK ALERT: ${alert.title} - ${alert.message}`);\n          break;\n        case \"slack\":\n          console.log(`SLACK ALERT: ${alert.title} - ${alert.message}`);\n          break;\n      }\n      alert.notificationsSent.push(action.type);\n    } catch (error) {\n      logger.logSystem(LogLevel.ERROR, `Failed to execute alert action: ${action.type}`, {\n        component: \"alert-manager\",\n        event: \"action_execution_failed\",\n        error: error instanceof Error ? error : void 0,\n        details: {\n          alertId: alert.id,\n          actionType: action.type\n        }\n      });\n    }\n  }\n  // Resolve an alert\n  resolveAlert(alertId) {\n    const alert = this.activeAlerts.get(alertId);\n    if (alert && !alert.resolved) {\n      alert.resolved = true;\n      alert.resolvedAt = Date.now();\n      this.activeAlerts.delete(alertId);\n      logger.logSystem(LogLevel.INFO, `Alert resolved: ${alert.title}`, {\n        component: \"alert-manager\",\n        event: \"alert_resolved\",\n        details: {\n          alertId,\n          duration: (alert.resolvedAt - alert.timestamp) / 1e3 / 60\n          // minutes\n        }\n      });\n      return true;\n    }\n    return false;\n  }\n  // Get current active alerts\n  getActiveAlerts() {\n    return Array.from(this.activeAlerts.values());\n  }\n  // Get alert history\n  getAlertHistory(limit = 100) {\n    return this.alertHistory.slice(-limit);\n  }\n  // Get alert statistics\n  getAlertStats() {\n    const stats = {\n      active: this.activeAlerts.size,\n      total: this.alertHistory.length,\n      byType: {},\n      bySeverity: {}\n    };\n    for (const type of Object.values(AlertType)) {\n      stats.byType[type] = 0;\n    }\n    for (const severity of Object.values(AlertSeverity)) {\n      stats.bySeverity[severity] = 0;\n    }\n    for (const alert of this.alertHistory) {\n      stats.byType[alert.type]++;\n      stats.bySeverity[alert.severity]++;\n    }\n    return stats;\n  }\n}\nconst alertManager = AlertManager.getInstance();\n{\n  setInterval(() => {\n    alertManager.evaluateRules();\n  }, 2 * 60 * 1e3);\n}\nconst GET = async (event) => {\n  const { url, locals } = event;\n  const rateLimitResponse = await rateLimitAdmin(event);\n  if (rateLimitResponse) {\n    return rateLimitResponse;\n  }\n  if (!locals.user || locals.user.role !== \"ADMIN\") {\n    return json({\n      error: \"Forbidden: Admin access required\",\n      timestamp: (/* @__PURE__ */ new Date()).toISOString()\n    }, { status: 403 });\n  }\n  try {\n    const action = url.searchParams.get(\"action\") || \"active\";\n    const limit = parseInt(url.searchParams.get(\"limit\") || \"100\");\n    let response;\n    switch (action) {\n      case \"active\":\n        response = {\n          alerts: alertManager.getActiveAlerts(),\n          count: alertManager.getActiveAlerts().length,\n          timestamp: (/* @__PURE__ */ new Date()).toISOString()\n        };\n        break;\n      case \"history\":\n        response = {\n          alerts: alertManager.getAlertHistory(limit),\n          timestamp: (/* @__PURE__ */ new Date()).toISOString()\n        };\n        break;\n      case \"stats\":\n        response = {\n          stats: alertManager.getAlertStats(),\n          timestamp: (/* @__PURE__ */ new Date()).toISOString()\n        };\n        break;\n      default:\n        return json({\n          error: \"Invalid action. Use: active, history, or stats\",\n          timestamp: (/* @__PURE__ */ new Date()).toISOString()\n        }, { status: 400 });\n    }\n    logger.logSystem(LogLevel.DEBUG, `Alerts API accessed: ${action}`, {\n      component: \"alerts-api\",\n      event: \"alerts_accessed\",\n      details: {\n        userId: locals.user.id,\n        action,\n        resultCount: Array.isArray(response.alerts) ? response.alerts.length : 0\n      }\n    });\n    return json(response, {\n      status: 200,\n      headers: {\n        \"Cache-Control\": \"no-cache, no-store, must-revalidate\"\n      }\n    });\n  } catch (error) {\n    logger.logSystem(LogLevel.ERROR, \"Alerts API error\", {\n      component: \"alerts-api\",\n      event: \"api_error\",\n      error: error instanceof Error ? error : void 0,\n      details: {\n        userId: locals.user?.id\n      }\n    });\n    return json({\n      error: \"Failed to retrieve alerts\",\n      timestamp: (/* @__PURE__ */ new Date()).toISOString(),\n      details: error instanceof Error ? error.message : \"Unknown error\"\n    }, { status: 500 });\n  }\n};\nconst POST = async (event) => {\n  const { request, locals } = event;\n  const rateLimitResponse = await rateLimitAdmin(event);\n  if (rateLimitResponse) {\n    return rateLimitResponse;\n  }\n  if (!locals.user || locals.user.role !== \"ADMIN\") {\n    return json({\n      error: \"Forbidden: Admin access required\",\n      timestamp: (/* @__PURE__ */ new Date()).toISOString()\n    }, { status: 403 });\n  }\n  try {\n    const body = await request.json();\n    const { action, alertId } = body;\n    if (action === \"resolve\" && alertId) {\n      const resolved = alertManager.resolveAlert(alertId);\n      if (resolved) {\n        logger.logSystem(LogLevel.INFO, `Alert resolved via API: ${alertId}`, {\n          component: \"alerts-api\",\n          event: \"alert_resolved\",\n          details: {\n            userId: locals.user.id,\n            alertId\n          }\n        });\n        return json({\n          success: true,\n          message: \"Alert resolved successfully\",\n          alertId,\n          timestamp: (/* @__PURE__ */ new Date()).toISOString()\n        });\n      } else {\n        return json({\n          error: \"Alert not found or already resolved\",\n          alertId,\n          timestamp: (/* @__PURE__ */ new Date()).toISOString()\n        }, { status: 404 });\n      }\n    }\n    return json({\n      error: \"Invalid action or missing parameters\",\n      timestamp: (/* @__PURE__ */ new Date()).toISOString()\n    }, { status: 400 });\n  } catch (error) {\n    logger.logSystem(LogLevel.ERROR, \"Alerts API POST error\", {\n      component: \"alerts-api\",\n      event: \"api_post_error\",\n      error: error instanceof Error ? error : void 0,\n      details: {\n        userId: locals.user?.id\n      }\n    });\n    return json({\n      error: \"Failed to process alert action\",\n      timestamp: (/* @__PURE__ */ new Date()).toISOString(),\n      details: error instanceof Error ? error.message : \"Unknown error\"\n    }, { status: 500 });\n  }\n};\nexport {\n  GET,\n  POST\n};\n"],"names":[],"mappings":"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"}