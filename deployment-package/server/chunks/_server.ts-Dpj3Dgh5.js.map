{"version":3,"file":"_server.ts-Dpj3Dgh5.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/scraping/enhanced-error-recovery/analytics/_server.ts.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { e as enhancedErrorRecovery } from \"../../../../../../chunks/enhanced-error-recovery.js\";\nconst GET = async ({ url }) => {\n  try {\n    const timeframe = url.searchParams.get(\"timeframe\") || \"30d\";\n    const validTimeframes = [\"7d\", \"30d\", \"90d\"];\n    if (!validTimeframes.includes(timeframe)) {\n      return json(\n        {\n          error: \"Invalid timeframe\",\n          message: \"Timeframe must be one of: 7d, 30d, 90d\"\n        },\n        { status: 400 }\n      );\n    }\n    const systemAnalytics = enhancedErrorRecovery.getSystemAnalytics();\n    const recentErrors = await getRecentErrors(timeframe);\n    const patternEvolution = await getPatternEvolution(timeframe);\n    return json({\n      success: true,\n      timeframe,\n      ...systemAnalytics,\n      recentErrors,\n      patternEvolution,\n      metadata: {\n        generatedAt: (/* @__PURE__ */ new Date()).toISOString(),\n        requestId: crypto.randomUUID(),\n        version: \"1.0\"\n      }\n    });\n  } catch (error) {\n    console.error(\"Enhanced error recovery analytics API error:\", error);\n    return json(\n      {\n        success: false,\n        error: \"Internal server error\",\n        message: error instanceof Error ? error.message : \"Unknown error occurred\",\n        timeframe: url.searchParams.get(\"timeframe\") || \"30d\"\n      },\n      { status: 500 }\n    );\n  }\n};\nasync function getRecentErrors(timeframe) {\n  const now = Date.now();\n  const timeframeMs = timeframe === \"7d\" ? 7 * 24 * 60 * 60 * 1e3 : timeframe === \"30d\" ? 30 * 24 * 60 * 60 * 1e3 : 90 * 24 * 60 * 60 * 1e3;\n  const mockErrors = [];\n  const errorTypes = [\"RATE_LIMIT\", \"API_ERROR\", \"NETWORK_ERROR\", \"AUTHENTICATION_ERROR\", \"TIMEOUT_ERROR\"];\n  const severities = [\"LOW\", \"MEDIUM\", \"HIGH\", \"CRITICAL\"];\n  for (let i = 0; i < 100; i++) {\n    const timestamp = new Date(now - Math.random() * timeframeMs);\n    mockErrors.push({\n      id: crypto.randomUUID(),\n      type: errorTypes[Math.floor(Math.random() * errorTypes.length)],\n      severity: severities[Math.floor(Math.random() * severities.length)],\n      message: \"Sample error message for analysis\",\n      timestamp,\n      sessionId: `session-${Math.floor(Math.random() * 20)}`,\n      accountId: Math.random() > 0.3 ? `acc-${Math.floor(Math.random() * 50)}` : void 0,\n      retryable: Math.random() > 0.3\n    });\n  }\n  return mockErrors.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n}\nasync function getPatternEvolution(timeframe) {\n  return [\n    {\n      date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1e3).toISOString(),\n      patternCount: 12,\n      newPatterns: 2,\n      resolvedPatterns: 1,\n      avgConfidence: 0.75\n    },\n    {\n      date: new Date(Date.now() - 14 * 24 * 60 * 60 * 1e3).toISOString(),\n      patternCount: 11,\n      newPatterns: 1,\n      resolvedPatterns: 0,\n      avgConfidence: 0.72\n    },\n    {\n      date: new Date(Date.now() - 21 * 24 * 60 * 60 * 1e3).toISOString(),\n      patternCount: 10,\n      newPatterns: 3,\n      resolvedPatterns: 2,\n      avgConfidence: 0.68\n    },\n    {\n      date: new Date(Date.now() - 28 * 24 * 60 * 60 * 1e3).toISOString(),\n      patternCount: 9,\n      newPatterns: 1,\n      resolvedPatterns: 1,\n      avgConfidence: 0.71\n    }\n  ];\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":"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"}