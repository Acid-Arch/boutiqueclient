import"../chunks/DsnmJJEf.js";import{i as je}from"../chunks/DX-Oc8op.js";import{c as j,f as d,a as t,p as Be,o as He,l as Ge,j as Ve,h as Ue,b as qe,d as v,$ as De,s as a,m as P,g as e,e as l,i as o,n as i,t as X,r as n,k as Fe,v as Te,ah as me,w as ue,aM as pe}from"../chunks/3zx2OM-S.js";import{l as Y,s as Z,i as V,a as Je,c as We}from"../chunks/Dwjkgfq3.js";import{c as Ke}from"../chunks/ugyboSLg.js";import{p as Qe,s as Re}from"../chunks/CZ88HukD.js";import{a as U}from"../chunks/lPcixCUF.js";import{C as Xe,a as Ye,b as Ze,c as et}from"../chunks/BrzuSUaY.js";import{S as tt,M as at,L as he,I as fe}from"../chunks/mTYbsNnE.js";import{U as rt}from"../chunks/BAf6IcXK.js";import{I as ee,s as te}from"../chunks/BID1lDIu.js";import{E as st}from"../chunks/BEt7RVes.js";import{E as lt}from"../chunks/C0A-HqK_.js";function ot(f){return function(...r){var m=r[0];return m.preventDefault(),f?.apply(this,r)}}function it(f,r){const m=Y(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.539.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const M=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16"}],["path",{d:"M18 17V9"}],["path",{d:"M13 17V5"}],["path",{d:"M8 17v-3"}]];ee(f,Z({name:"chart-column"},()=>m,{get iconNode(){return M},children:(g,E)=>{var c=j(),_=d(c);te(_,r,"default",{},null),t(g,c)},$$slots:{default:!0}}))}function nt(f,r){const m=Y(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.539.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const M=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];ee(f,Z({name:"loader-circle"},()=>m,{get iconNode(){return M},children:(g,E)=>{var c=j(),_=d(c);te(_,r,"default",{},null),t(g,c)},$$slots:{default:!0}}))}function dt(f,r){const m=Y(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.539.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const M=[["path",{d:"m10 17 5-5-5-5"}],["path",{d:"M15 12H3"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}]];ee(f,Z({name:"log-in"},()=>m,{get iconNode(){return M},children:(g,E)=>{var c=j(),_=d(c);te(_,r,"default",{},null),t(g,c)},$$slots:{default:!0}}))}var ct=v('<meta name="description" content="Login to your Client Portal"/>'),vt=v('<!> <p class="text-slate-300">Sign in to access your dashboard</p>',1),ut=v('<div class="bg-red-500/10 border border-red-500/20 rounded-lg p-3"><p class="text-red-400 text-sm"> </p></div>'),pt=me('<svg class="w-5 h-5 mr-3" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg> Continue with Google',1),ht=v("<!> Sign in with Email",1),ft=v('<!> <div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-white/10"></div></div> <div class="relative flex justify-center text-sm"><span class="bg-transparent px-2 text-slate-400">Or continue with email</span></div></div> <!>',1),mt=v("<!> Signing in...",1),gt=v("<!> Sign In",1),_t=me('<svg class="w-4 h-4 mr-2" viewBox="0 0 24 24"><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg> Back to Google Sign In',1),$t=v('<form class="space-y-4"><div><!> <!></div> <div><!> <div class="relative"><!> <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-white"><!></button></div></div> <!></form> <div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-white/10"></div></div> <div class="relative flex justify-center text-sm"><span class="bg-transparent px-2 text-slate-400">Or continue with Google</span></div></div> <!>',1),wt=v('<!> <!> <div class="pt-4 space-y-3"><div class="flex items-center text-sm text-slate-300"><!> Manage Instagram accounts</div> <div class="flex items-center text-sm text-slate-300"><!> Analytics and insights</div> <div class="flex items-center text-sm text-slate-300"><!> Secure and reliable</div></div>',1),xt=v("<!> <!>",1),bt=v('<div class="min-h-screen flex items-center justify-center p-4"><div class="w-full max-w-md space-y-6"><div class="text-center"><h1 class="text-4xl font-bold text-white mb-2">âœ¨ Client Portal</h1> <p class="text-slate-300">Manage your Instagram accounts with ease</p></div> <!> <div class="text-center text-sm text-slate-400"><p>Secure login powered by Google OAuth</p></div></div></div>');function Bt(f,r){Be(r,!1);const[m,M]=Je(),g=()=>We(Qe,"$page",m),E=P();let c=P(!1),_=P("oauth"),B=P(!1),I=P(!1),w=P(""),L=P("jorge.test@gmail.com"),S=P("testpassword123");He(()=>{a(c,!0)});async function ge(){try{await Re("google",{callbackUrl:"/client-portal"})}catch(u){console.error("OAuth signin error:",u),a(w,"OAuth signin failed. Please try again.")}}function _e(){a(B,!e(B))}async function $e(){if(!e(L)||!e(S)){a(w,"Please fill in all fields");return}a(I,!0),a(w,"");try{const x=await(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:e(L),password:e(S)})})).json();x.success?window.location.href="/client-portal":a(w,x.error||"Login failed")}catch(u){a(w,"Network error. Please try again."),console.error("Login error:",u)}finally{a(I,!1)}}function ae(){a(_,e(_)==="oauth"?"email":"oauth"),a(w,""),a(L,""),a(S,"")}Ge(()=>g(),()=>{a(E,g().url.searchParams.get("error")||g().url.searchParams.get("reason"))}),Ve(),je();var re=j();Ue(u=>{var x=ct();De.title="Login - Client Portal",t(u,x)});var we=d(re);{var xe=u=>{var x=bt(),se=l(x),be=o(l(se),2);Xe(be,{class:"glass-card border-white/10",children:(ye,yt)=>{var le=xt(),oe=d(le);Ye(oe,{class:"space-y-1 text-center",children:(q,Me)=>{var N=vt(),H=d(N);Ze(H,{class:"text-2xl text-white",children:(D,F)=>{i();var T=X("Welcome Back");t(D,T)},$$slots:{default:!0}}),i(2),t(q,N)},$$slots:{default:!0}});var Pe=o(oe,2);et(Pe,{class:"space-y-4",children:(q,Me)=>{var N=wt(),H=d(N);{var D=p=>{var $=ut(),h=l($),C=l(h,!0);n(h),n($),Fe(()=>Te(C,e(w)||(e(E)==="OAuthAccountNotLinked"?"Email already in use with different provider":"Authentication failed. Please try again."))),t(p,$)};V(H,p=>{(e(E)||e(w))&&p(D)})}var F=o(H,2);{var T=p=>{var $=ft(),h=d($);U(h,{onclick:ge,class:"w-full bg-white hover:bg-gray-50 text-gray-900 font-medium",get disabled(){return e(I)},children:(k,K)=>{var b=pt();i(),t(k,b)},$$slots:{default:!0}});var C=o(h,4);U(C,{variant:"outline",onclick:ae,class:"w-full border-white/20 text-white hover:bg-white/10 bg-transparent",children:(k,K)=>{var b=ht(),G=d(b);at(G,{class:"w-4 h-4 mr-2"}),i(),t(k,b)},$$slots:{default:!0}}),t(p,$)},Ce=p=>{var $=$t(),h=d($),C=l(h),k=l(C);he(k,{for:"email",class:"text-slate-300",children:(s,y)=>{i();var z=X("Email Address");t(s,z)},$$slots:{default:!0}});var K=o(k,2);fe(K,{id:"email",type:"email",placeholder:"Enter your email",required:!0,class:"bg-white/5 border-white/20 text-white placeholder:text-slate-400",get value(){return e(L)},set value(s){a(L,s)},$$legacy:!0}),n(C);var b=o(C,2),G=l(b);he(G,{for:"password",class:"text-slate-300",children:(s,y)=>{i();var z=X("Password");t(s,z)},$$slots:{default:!0}});var de=o(G,2),ce=l(de);{let s=ue(()=>e(B)?"text":"password");fe(ce,{id:"password",get type(){return e(s)},placeholder:"Enter your password",required:!0,class:"bg-white/5 border-white/20 text-white placeholder:text-slate-400 pr-10",get value(){return e(S)},set value(y){a(S,y)},$$legacy:!0})}var Q=o(ce,2),ke=l(Q);Ke(ke,()=>e(B)?st:lt,(s,y)=>{y(s,{class:"h-4 w-4"})}),n(Q),n(de),n(b);var ze=o(b,2);{let s=ue(()=>e(I)||!e(L)||!e(S));U(ze,{type:"submit",get disabled(){return e(s)},class:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:(y,z)=>{var ve=j(),Ie=d(ve);{var Ne=A=>{var O=mt(),R=d(O);nt(R,{class:"w-4 h-4 mr-2 animate-spin"}),i(),t(A,O)},Oe=A=>{var O=gt(),R=d(O);dt(R,{class:"w-4 h-4 mr-2"}),i(),t(A,O)};V(Ie,A=>{e(I)?A(Ne):A(Oe,!1)})}t(y,ve)},$$slots:{default:!0}})}n(h);var Ae=o(h,4);U(Ae,{variant:"outline",onclick:ae,class:"w-full border-white/20 text-white hover:bg-white/10 bg-transparent",children:(s,y)=>{var z=_t();i(),t(s,z)},$$slots:{default:!0}}),pe("click",Q,_e),pe("submit",h,ot($e)),t(p,$)};V(F,p=>{e(_)==="oauth"?p(T):p(Ce,!1)})}var ie=o(F,2),J=l(ie),Ee=l(J);rt(Ee,{class:"w-4 h-4 mr-2 text-blue-400"}),i(),n(J);var W=o(J,2),Le=l(W);it(Le,{class:"w-4 h-4 mr-2 text-green-400"}),i(),n(W);var ne=o(W,2),Se=l(ne);tt(Se,{class:"w-4 h-4 mr-2 text-blue-400"}),i(),n(ne),n(ie),t(q,N)},$$slots:{default:!0}}),t(ye,le)},$$slots:{default:!0}}),i(2),n(se),n(x),t(u,x)};V(we,u=>{e(c)&&u(xe)})}t(f,re),qe(),M()}export{Bt as component};
